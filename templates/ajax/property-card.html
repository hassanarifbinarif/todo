{% load static %}
<div class="property-card-container">
{% if properties.data %}
{% for obj in properties.data %}
<a href="{% url 'property_listing' pk=obj.id %}">
    <div class="property-card">
        <div class="property-card-image-container">
            {% if obj.is_published %}
            <div class="card-type">
                <span>New</span>
            </div>
            {% endif %}
            <img src="{{obj.images.0.image}}" loading="lazy" alt="Property Image" />
        </div>
        <div class="property-card-details">
            <div class="details-row1">
                <div class="details-row1-column1">
                    <span title="{{obj.property_type}}">{{obj.property_type}}</span>
                    <span title="{{obj.neighbourhood}}">{{obj.neighbourhood}}</span>
                </div>
                <div class="details-row1-column2">
                    <label for="{{obj.id}}" class="favourite-property-checkbox {% if obj.is_favourite == True %}active{% endif %}" {% if obj.is_favourite == True %}onclick="removeFavourite(event, '{{obj.id}}');"{% else %}onclick="makeFavourite(event, '{{obj.id}}');"{% endif %}>
                        <input type="checkbox" readonly {% if obj.is_favourite == True %}checked{% endif %} id="{{obj.id}}" name="favourite_property" />
                        <svg class="favourite-logo" width="25" height="22" viewBox="0 0 25 22"
                            fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M22.6377 3.15345C21.1419 1.47213 19.2008 0.801797 16.9286 1.08202C15.4613 1.26334 14.2681 1.97762 13.2747 3.01608C13.0635 3.23586 12.8751 3.46663 12.6695 3.6974C12.4583 3.45564 12.2699 3.21938 12.0586 3.00509C10.2488 1.16993 8.06794 0.560039 5.56733 1.31828C3.22086 2.03257 1.85066 3.67542 1.23408 5.92817C1.11989 6.35674 1.07422 6.8018 1 7.24136V8.25235C1.01142 8.3018 1.02855 8.35125 1.03425 8.4007C1.15415 9.73586 1.65655 10.9337 2.41016 12.0491C3.20374 13.2304 4.18 14.2688 5.26474 15.1974C7.39997 17.0326 9.56945 18.8293 11.7332 20.637C12.3441 21.148 13.0292 21.1205 13.6686 20.593C15.3243 19.2194 16.9856 17.8458 18.6356 16.4666C20.0343 15.2963 21.3931 14.0765 22.5064 12.6425C23.3571 11.5436 24.0079 10.3512 24.2249 8.98861C24.5674 6.82927 24.1335 4.84575 22.6377 3.15894V3.15345Z"
                                fill="none" stroke="#000000" />
                        </svg>
                    </label>
                </div>
            </div>
            <div class="details-row2">
                <div class="details-row2-column">
                    <div>
                        <img src="{% static 'Assets/core/images/area_logo.svg' %}" alt="land" />
                        <span>{{obj.land}} m<sup>2</sup></span>
                    </div>
                    <div>
                        <img src="{% static 'Assets/core/images/house_logo.svg' %}" alt="construction" />                                        
                        <span>{{obj.construction}} m<sup>2</sup></span>
                    </div>
                </div>
                <div class="details-row2-column">
                    <div>
                        <img src="{% static 'Assets/core/images/bed_logo.svg' %}" alt="bed" />
                        <span>{{obj.bedrooms}}</span>
                    </div>
                    <div>
                        <img src="{% static 'Assets/core/images/bathroom_logo.svg' %}" alt="bathroom" />
                        <span>{{obj.bathrooms}}</span>
                    </div>
                </div>
            </div>
            <hr />
            <div class="details-row3">
                <span title="{{obj.neighbourhood}}, {{obj.city}}">{{obj.neighbourhood}}, {{obj.city}}</span>
                <span class="price">${{obj.price|floatformat:"-2g"}}</span>
            </div>
        </div>
    </div>
</a>
{% endfor %}
{% else %}
<div class="w-100 text-center pt-4 no-properties">
    <h2>No Properties Found</h2>
</div>
{% endif %}
</div>

<div class="property-search-pagination">
    <div>
        <div class="page-label current-page">
            <span>{{properties.pagination.currentPage}}</span>
        </div>
        {% if properties.pagination.next == null %}
        <div class="page-label">
            <span>...</span>
        </div>
        {% else %}
        <div class="page-label">
            <span>2</span>
        </div>
        <div class="page-label">
            <span>3</span>
        </div>
        <div class="page-label">
            <span>...</span>
        </div>
        {% endif %}
        <div class="page-label">
            <span>{{properties.pagination.total}}</span>
        </div>
        <div class="page-label next-page-arrow">
            <svg width="29" height="29" viewBox="0 0 29 29" fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M14.5 29C22.5081 29 29 22.5081 29 14.5C29 6.49187 22.5081 0 14.5 0C6.49187 0 0 6.49187 0 14.5C0 22.5081 6.49187 29 14.5 29ZM12.8307 8.36756C12.6779 8.23064 12.5296 8.09774 12.3218 8.05555H12.0318H11.9158C11.6258 8.17326 11.4518 8.34982 11.3358 8.64409C11.1618 9.05606 11.2778 9.35033 11.5678 9.6446L16.2658 14.4117L16.3818 14.5294L16.2658 14.6471L11.6258 19.3554C11.6064 19.375 11.5807 19.3946 11.5549 19.4143C11.5033 19.4535 11.4518 19.4927 11.4518 19.532C11.2778 19.7674 11.2198 20.1205 11.3938 20.4148C11.6258 21.0033 12.3798 21.121 12.8438 20.6502L18.2378 15.1768C18.3538 15.118 18.4698 14.9414 18.4698 14.8237C18.6438 14.4117 18.5278 14.1175 18.2378 13.8232L13.0178 8.52638C12.9521 8.47638 12.891 8.42165 12.8307 8.36756Z"
                    fill="#9A9A9A" />
            </svg>
        </div>
    </div>
    <p class="total-search-count">{{properties.pagination.currentPage}}-{{properties.pagination.count}} of {{properties.pagination.count}} Properties</p>
</div>